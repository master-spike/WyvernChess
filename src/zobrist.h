#ifndef H_GUARD_ZOBRIST
#define H_GUARD_ZOBRIST

#include "types.h"
#include "utils.h"
#include <iostream>
#include <iomanip>
#include "position.h"

namespace Wyvern {



void randomiseZobristNumbers(U64* ptr, int count, std::string name);

const U64 zobrist_white_pawn[64] = {
  0x4873986923c64567ULL,
  0x58ec944a5cffdc51ULL,
  0xd7ab58ba7ccd1f29ULL,
  0xe146a9e31efb41f2ULL,
  0x27f8085462c2007cULL,
  0x438dcde7e9e8231bULL,
  0x7263f92e255a0f76ULL,
  0x079ac4c9d79fc233ULL,
  0xd7b7500d5d32fb66ULL,
  0xd95a30a3e458ba31ULL,
  0xa317b105895d6125ULL,
  0xa8d4845e5ae9a858ULL,
  0xe0c6d0cd8cb2bdabULL,
  0x861124549eb4769bULL,
  0x8641f8741d82c40eULL,
  0xf0878ddcbd3df521ULL,
  0xd4a1c83edde91a70ULL,
  0x2367adfcf8e1c241ULL,
  0x2a97c67e5f01823eULL,
  0x7796d36b4adcb9eaULL,
  0x4e2a585ca438d78fULL,
  0x06fbd43b7cb042ecULL,
  0x8f548d3cccaf9a32ULL,
  0xa45c7fdb1b1889ecULL,
  0xbb4378fe481af902ULL,
  0xc33adeaa26fa40fbULL,
  0x3fe6edd1a52985fbULL,
  0xc794b77cc13cf005ULL,
  0xa86115be0fd86575ULL,
  0x26bbaf5ce9f98c89ULL,
  0x4095b60f3c99b6a8ULL,
  0x50b3e4f135eb57b1ULL,
  0xbf000bf75def7e05ULL,
  0x0ae5823aeaa184e9ULL,
  0x7fd04acb700b8fcaULL,
  0x96bd476402473148ULL,
  0x9ea83f1e5d23121fULL,
  0xfdc5c564ee7b471cULL,
  0x82c53e5a7b732b14ULL,
  0x2f63d379234bb15eULL,
  0x0624ee64df70813bULL,
  0x59dc1109709eca11ULL,
  0x11f2d9ac5bd4e0aaULL,
  0x703ba8af21105e1bULL,
  0xc5500ee3e7cd7e33ULL,
  0x015cc315d447d648ULL,
  0x01198422016f4fbbULL,
  0xa5f5307d579b24baULL,
  0x011cac1a1ee1370bULL,
  0x70295af8bd238f7fULL,
  0x7713821b34a418f8ULL,
  0xd3e8e74e2aca55b5ULL,
  0xe8e09938f6321298ULL,
  0x1a34ea3d5c4dca79ULL,
  0x82771b4e6e5f5dbcULL,
  0xfd05286c4bcbc5faULL,
  0xfa2bfe21d4866aacULL,
  0xaaa26a55591a91aaULL,
  0xe37321b5ec708dbeULL,
  0x29d3b75c0904173bULL,
  0xc9af12b35094ff36ULL,
  0x0a9ee3e4fcf0ace2ULL,
  0x31498d15ff326b4fULL,
  0xb5a92e4eb5824afdULL
};

const U64 zobrist_white_knight[64] = {
  0x1bb2afd42c708a08ULL,
  0x1348c6541a29858aULL,
  0x1dd5f6bce80a069aULL,
  0xf04447a8ae18f10eULL,
  0xab8eb9f35a5bfeacULL,
  0xc29bb62d9dd7574cULL,
  0xe806f3e543429d09ULL,
  0x82cd9daf2233f8c4ULL,
  0xd42d9e7f4d844ea3ULL,
  0x6e47e77664d467adULL,
  0x3dec8c1cde324cdeULL,
  0x8af62e30d3c48c4aULL,
  0x856c3685e8232e20ULL,
  0x23044807ecb285fbULL,
  0x28b90b0b3bec2ff4ULL,
  0xacc3ab86a8ba5e20ULL,
  0x5dec80f14a05f63eULL,
  0xfbb7cc336867aed9ULL,
  0xd2e339a358504699ULL,
  0x5a345dd967d32c14ULL,
  0xd5f2dfa0945e4ff7ULL,
  0xb105f8f627a88110ULL,
  0xc1b4d9be04016394ULL,
  0xa2fa6e788544acbcULL,
  0x7e2300e6ef69cf49ULL,
  0x9e6979dacd1a57d0ULL,
  0x517e714cb37e256aULL,
  0x6b48abb3cf251b51ULL,
  0xe494413a8b536384ULL,
  0x169095993a31b2fbULL,
  0xeaeed8446f573e32ULL,
  0xc3e58de946bcf49bULL,
  0x8df542088ecf3625ULL,
  0x81532c5ebbe25be9ULL,
  0x8ab2d2d29daa6f60ULL,
  0xd054f5fa7e856cd0ULL,
  0xbcd4b4e8373509d8ULL,
  0xaf98d3644a827166ULL,
  0xae759a87aba8b9d9ULL,
  0x288a725a2870f265ULL,
  0x1329b680b462b73fULL,
  0xdfa5947ce2de7044ULL,
  0xed596a57674e8089ULL,
  0xefacbdad6051e5d3ULL,
  0x08ecac8072959786ULL,
  0x76f1b8857fe4bd17ULL,
  0x1df12566530c2b8cULL,
  0x32bb467c97c07b7cULL,
  0xbc6645e4fcfc4c22ULL,
  0x60639c0bda61dfdaULL,
  0x27834dbc066241afULL,
  0xfe3a172f0b6966b4ULL,
  0x3b160727c3af7dffULL,
  0x6f1fb207bfac4393ULL,
  0x8e348d11d76d12b8ULL,
  0xbb4fc0efd38d6f2dULL,
  0xb06377b606d4d089ULL,
  0x22e410c713c1e135ULL,
  0x80d84a675e831a24ULL,
  0xe7ec7f12619669edULL,
  0x68d8230286392545ULL,
  0x589dd7f8d50a45e5ULL,
  0x1ba5e6d16509ac77ULL,
  0x091fd6f4a7c13896ULL
};

const U64 zobrist_white_bishop[64] = {
  0x8fcab9824eaaae95ULL,
  0x7c90b2aeca49626cULL,
  0x92bafd68fd1628cdULL,
  0x83f27aa67c7a5eacULL,
  0x4899ecca9da802b4ULL,
  0x1f2aa137c4c272b2ULL,
  0x62613acf880829cbULL,
  0xde5e6b8011c32fc9ULL,
  0xc2da6e282503606eULL,
  0x18193f6a20d7ef4cULL,
  0x7c99aad33cd21dedULL,
  0xbc00008b2579b94cULL,
  0x35d4049aed56c322ULL,
  0xdbe454fea5d1b218ULL,
  0x5da33e458fcd2dd9ULL,
  0x01ff3c01a9c6a191ULL,
  0xbe15c4d9aa2acec9ULL,
  0xe8eed62f0443cb01ULL,
  0xfa61658781024115ULL,
  0x699eb6626613a67cULL,
  0x05819f72bafc5369ULL,
  0x8ea6e165f47160cdULL,
  0x25cfec491fab843eULL,
  0x983a27ce284bc971ULL,
  0x9d76564feca7d275ULL,
  0x31ff86642c7ef0eaULL,
  0x53fd2c61ebebad81ULL,
  0xa567bd9be2c351feULL,
  0xfe8caae95d0d9dbfULL,
  0xd5bd8d328c4e517eULL,
  0x756afb8c797cabf9ULL,
  0x743c0da4235ba1c7ULL,
  0x00ed11b263f41002ULL,
  0x3df332ec98169072ULL,
  0xd60091f05f4d8401ULL,
  0xdfcf7b674f8b4210ULL,
  0xfe17de5b2650ac99ULL,
  0x5e98d3d46b8eb29fULL,
  0x86d1d403cf61e50aULL,
  0x02befb0de1a7f2bcULL,
  0xd60e03ab0cbf459bULL,
  0x28d614013698a4d5ULL,
  0xd7f6fed6a5f295e5ULL,
  0xa216b7c57a3ef57dULL,
  0x532da02e9621a08eULL,
  0xe6b9b1c6740201afULL,
  0x361f6d8a85c94363ULL,
  0xad0c38de68976770ULL,
  0x1a2b831a3c897556ULL,
  0x09074301971b7321ULL,
  0x328be0fd41d83d0dULL,
  0x5ca4d4a198c2bc16ULL,
  0x3092afd274cf2ee3ULL,
  0x2c35174b6198e8d2ULL,
  0x4ed1625584d5e761ULL,
  0x62c2fbdd9b33ed6cULL,
  0x4ade7ced7ef7d7bcULL,
  0x532053e5bfef1613ULL,
  0xbddd85ab34e201c7ULL,
  0xfc881a815a4dcda4ULL,
  0xb7ee2d1aca53cf1cULL,
  0x134ce42444662bebULL,
  0xb6a8621e4679c93bULL,
  0xb968196a5dfbe1acULL
};

const U64 zobrist_white_rook[64] = {
  0xf30604469658dcf3ULL,
  0x580e4626582b5647ULL,
  0x5ab215ebcbd28d0dULL,
  0xf53b573a306c261fULL,
  0x26abad2a8454fac0ULL,
  0x91f639f8914ec8baULL,
  0xb973489e9c16d7c7ULL,
  0xd70472db6208fa11ULL,
  0x4ea7ca0a7722f860ULL,
  0x5c5ba6b51031cf4dULL,
  0x0222b70dbca0dc03ULL,
  0xe7cdf75d0e47ed0dULL,
  0x5b560e78a487929bULL,
  0x0d9ced4c487035d5ULL,
  0xde98c70f35eae486ULL,
  0x9053b59c39eb97f2ULL,
  0x805adefa7fa7b10dULL,
  0x6bdbdcb585b08fd8ULL,
  0x2f5d6dfd93c24250ULL,
  0x34a5172a655aa209ULL,
  0x3fb78ffb25a309e2ULL,
  0x529a4d547d476e13ULL,
  0x4b2331321463b331ULL,
  0xff5bdb76e6ce4e4eULL,
  0xf64d7fb6ba716675ULL,
  0x827162285c6b4021ULL,
  0x9237b1cfd025f02eULL,
  0x3f62c6dcc8f93580ULL,
  0x5cb07f1956d7ee9cULL,
  0x874faf4acc6dd41eULL,
  0x2f1fd273e07ce0d1ULL,
  0x2dc02e7bade9c74aULL,
  0xa87b240dae31685aULL,
  0xfaca2aed86360a9cULL,
  0x8bdb8d02dcbc565bULL,
  0x9452cb3d53dea5b5ULL,
  0x7ed4f1024a57aab6ULL,
  0xf7950624a04c16c4ULL,
  0x481226b5d89780c8ULL,
  0xeedb75d255308680ULL,
  0x0dfd975699e00361ULL,
  0x767108c8c2432016ULL,
  0x44b5024d95ca9effULL,
  0x945ed907cd8ae9a8ULL,
  0x2ea61333ca0917e1ULL,
  0xeb1d263b19576a55ULL,
  0x786e332f4cf0f1eeULL,
  0xa5816749a902a220ULL,
  0x62f8b37ffea042e2ULL,
  0x5fe3d969bc47c0e3ULL,
  0x3bb9a498dbb65211ULL,
  0xc122d0187d9fa941ULL,
  0xb1fdefc8e34b47a8ULL,
  0xee909d1a1604fca2ULL,
  0x051566fed04962f4ULL,
  0xbc2daa96ce48794bULL,
  0x8dcb1f255e15cce8ULL,
  0x6c6dedaef88f1a5cULL,
  0x7d86a8279246d445ULL,
  0x578d3ea9783f0fe5ULL,
  0x582c098a2e715b8aULL,
  0xa76a46bca6a44475ULL,
  0xf039ac7fadba76eeULL,
  0x48eaac6757157c02ULL
};

const U64 zobrist_white_queen[64] = {
  0xcf87d6b6cb8cb52bULL,
  0x98613bf5c464c41bULL,
  0x669015e7e41c56abULL,
  0xb7e5be1e54905c5bULL,
  0xc7771011c7a88302ULL,
  0xe53b6ee156cd6e4dULL,
  0x808ad5741b600487ULL,
  0x27a1c97481db7276ULL,
  0x1183f728a02a4d68ULL,
  0xbb3aa9e4331d648fULL,
  0x739421cabfcc1739ULL,
  0x975e2b79dfe8145cULL,
  0x15de5ed63b8aa791ULL,
  0x96dffb19cdb79257ULL,
  0x5b8e1769d08de918ULL,
  0x9fd1832fe0dd5269ULL,
  0xe597b1547a578108ULL,
  0xc4aea0d15b39ad75ULL,
  0x2f613843c29b1b05ULL,
  0x4a15c6c063bca284ULL,
  0x319e5ff325969f47ULL,
  0xdc65c87d5b0cf34dULL,
  0x7e0237f3dfe62b99ULL,
  0x41cc1dd3bb22c0c4ULL,
  0xe2ef2763cf28357aULL,
  0x4566a79dc8342a61ULL,
  0x2d5374c7dfe08acfULL,
  0xe2e477683b87439dULL,
  0x546b1482d75b611dULL,
  0x5e0130d0dd003267ULL,
  0x7daadc0368c4bce6ULL,
  0x5960bf76f9d723e6ULL,
  0xf3603c4fe6d9c8ffULL,
  0x39dd38c6e3edaf0dULL,
  0x076a6730ad8dc3cdULL,
  0x4a32ea4ede99e915ULL,
  0xe85c9e9dfed1b5f4ULL,
  0x98b7465dcf6edbd1ULL,
  0x5c18166222603832ULL,
  0xe536b579d5d81c37ULL,
  0x6bbfd896f1c8bcb2ULL,
  0x9983a59c115cd5b5ULL,
  0xa7ffa0ed0ccdbeeaULL,
  0xa15af2318b3ceb66ULL,
  0x65de89b690cf8a0dULL,
  0x986ffe95d013603dULL,
  0x0eabf48714f7f274ULL,
  0xa782f3e2aa00ead0ULL,
  0x717e1341cc789bc9ULL,
  0x9cbf0b01b8deddd5ULL,
  0xb11144beabefc5abULL,
  0xc138526b36ef372bULL,
  0x27fb2716dc22c7beULL,
  0x9ea9c06a25abac35ULL,
  0x2573ad55b4f23aa3ULL,
  0xfabbccf5a1375ef2ULL,
  0x4b846c3ae0366dafULL,
  0x5ebfe843773b9914ULL,
  0x5a550fd02d01232aULL,
  0x2baf1b8d623c63f1ULL,
  0xea9353ab42a33e5eULL,
  0xa2f2893d1415684fULL,
  0x27fac8653692c907ULL,
  0x457822b5955ad7c9ULL
};

const U64 zobrist_white_king[64] = {
  0x0ea590fd8eef7590ULL,
  0x29556d647940062bULL,
  0x0a3383ab7d35a642ULL,
  0x1dcf35e29f38df71ULL,
  0x4a2b0862898de1dcULL,
  0x66aaed1d919f9da3ULL,
  0x9ffa8ea4b582c831ULL,
  0xc06ce573b15a4adcULL,
  0x4674cf1176704049ULL,
  0x95f26fca3c76efb0ULL,
  0x991ca025f375b9abULL,
  0x7489b6ebd60892adULL,
  0xfd38beb4bf4d5f95ULL,
  0x191e63e3abd150edULL,
  0xac2fb919f2876153ULL,
  0xe42b6c9c9e8ca3e1ULL,
  0x04ac2a9f3bad14fcULL,
  0x31ce9a9f9a697823ULL,
  0x208ccaea3ac48ddeULL,
  0x7062951581d510ccULL,
  0x92106d9a53ca4123ULL,
  0x60efab2ed17dff9bULL,
  0x67e60d1e6447c405ULL,
  0x17cf4c1179ba02d3ULL,
  0x2d8b1c7c76b1b568ULL,
  0x9ef95f5ab71b111aULL,
  0x02acbf852a44f1dfULL,
  0xed3d730e549aac1aULL,
  0xa8007f4de0a8a864ULL,
  0x762b08ef2a7bb226ULL,
  0x9196de11160d8ec3ULL,
  0x4530a9662a238fc8ULL,
  0xb1ee72bbc5e2a0d4ULL,
  0x6edc50e7d2157cfdULL,
  0xa8747188106cfc5aULL,
  0x0d6b95b1e4966507ULL,
  0x7765b56b14fec53fULL,
  0xce3ced90be5a3f79ULL,
  0x64305fd3cba1d468ULL,
  0x9698a9600939f5c4ULL,
  0x4c1848871c1bcf1bULL,
  0xea8bbaf4996eee31ULL,
  0x0ee292ff2c7da9dbULL,
  0xd6521c4d28b01113ULL,
  0x7d274db7d1b93daeULL,
  0x647b4b643b479013ULL,
  0xfcadc8abab3706e9ULL,
  0x838b9346720bb470ULL,
  0x7c58cfa3dbcd8e27ULL,
  0x1f1666e38a97753bULL,
  0xc8282df8f9e2b714ULL,
  0x60409e7a4a462292ULL,
  0xac12dd67ec321bffULL,
  0x2e62108e28cb2779ULL,
  0x88722b10d939d402ULL,
  0xd96c0bfdbe564b45ULL,
  0x0f5e55c4dba09a23ULL,
  0x1d4c2e75bca76638ULL,
  0xd91be5745c6db689ULL,
  0xc2b2395b83efa6b3ULL,
  0x979a6ec516c27021ULL,
  0x1390c5fd7f533f8eULL,
  0xa3d19c03f10d588cULL,
  0x49867d3da800af63ULL
};

const U64 zobrist_black_pawn[64] = {
  0xe9d958e4d30183a1ULL,
  0x4631072587598fa8ULL,
  0x8a7a1f4cec9ae3c7ULL,
  0xe0aa4d2d58a77089ULL,
  0xaef87844bbf26f6aULL,
  0x93d1c2883e413b45ULL,
  0xdeb137a35e8b2f4eULL,
  0x8a2d2837b4e0068cULL,
  0x178a7406811c87e2ULL,
  0xec3c5dbc7b2b0875ULL,
  0xd84e76b77d0867c5ULL,
  0x451ab8f8c3e4d5b0ULL,
  0xbb1bf412313d7fd6ULL,
  0x9ecd4eecb69a6f7eULL,
  0x1bb27d7e868f1526ULL,
  0xc352a5dfa5b63b70ULL,
  0x2f47dadc19e526d2ULL,
  0xfcd61b8438989510ULL,
  0x8b51d524923bb5a1ULL,
  0xd5f5d06b8e1d561fULL,
  0x2ed89110c47dbf5aULL,
  0x903dcda5dffc7b17ULL,
  0xa1fcabef4b24668cULL,
  0x17ac654e51cef0daULL,
  0x00c446f3402a6bb3ULL,
  0x2e64fd9a627778c3ULL,
  0x4ad1b9b5d2bef4b2ULL,
  0x203520c68a2060dbULL,
  0xc9b44f0eb1d64e9dULL,
  0xf85f59f21cb391d3ULL,
  0x58b19a5b05e167d7ULL,
  0xc363705dffa957b0ULL,
  0xb896c427b7513fd3ULL,
  0x0e7be6fac1c119c8ULL,
  0xf55b594ca0af9480ULL,
  0x796c15917a132acfULL,
  0xbdbc4321649f2be9ULL,
  0xe92ab61b9d138152ULL,
  0xfaa441db5076a2f4ULL,
  0x8ff3be08b239501fULL,
  0x83524889822f698aULL,
  0xd87191cd2f8443f1ULL,
  0xfb03cdcceb1ad033ULL,
  0x9116746fe35d652dULL,
  0xc94f4ed3b79047fcULL,
  0xf798b27904ee54a3ULL,
  0xa584f23cf4545565ULL,
  0x10173577b044a68dULL,
  0x7665936a7e013274ULL,
  0x7db84ed62537ad85ULL,
  0x757e78bb1ca21051ULL,
  0x47fc0695ed2b0000ULL,
  0xf95f114b5568a4bbULL,
  0xafbbf0f7c3c45a56ULL,
  0x5ea65540e333b819ULL,
  0xc5ec6ebe8ab79378ULL,
  0xb63d3c51022808b8ULL,
  0x37b133f68b27275fULL,
  0xa7c9ad2facb1a7c9ULL,
  0x3e98efc6b3c499dcULL,
  0x638337f70111092cULL,
  0x7cef133e28eec4d6ULL,
  0x9f99db95687e0c21ULL,
  0xfbee65854a53f336ULL
};

const U64 zobrist_black_knight[64] = {
  0x73dbb22ca1d64c7bULL,
  0xd4c7ab8ce6222cfdULL,
  0x2cb07c9058bb92d3ULL,
  0x15ac6b486c560c80ULL,
  0x323e792fa33f6d68ULL,
  0xd84eaf2d8c6ecc2dULL,
  0xe82277e88ac2f4ecULL,
  0x2191e411dd6dd516ULL,
  0xac41956c963d7f44ULL,
  0x0f32810840f87c5fULL,
  0xa6343be2fd9999b4ULL,
  0xd757bbe0a72a69efULL,
  0x1696099535104a69ULL,
  0xb66aeee5b8c2c17eULL,
  0x189b9e8d66cd4385ULL,
  0xc37e3a2c829e443aULL,
  0x953a6fc0cf9918dbULL,
  0xaa45a46cf0c81091ULL,
  0x58515079e04fee61ULL,
  0xd1e32fa80c5a8779ULL,
  0x02e8e879393e416aULL,
  0x3585b952d75ef200ULL,
  0x82664e2057df3e2bULL,
  0xf35845e4884dda7dULL,
  0x68778892b5a457e6ULL,
  0x94ce12bd2cffa66dULL,
  0x94c7ed1f63360d4eULL,
  0xb0fa66aa1cc86f90ULL,
  0x4806b3e24f245606ULL,
  0x64ae7d8c6d352682ULL,
  0x9f92e714cbacc514ULL,
  0xabdf92ea2cf853f9ULL,
  0x890a14571b7de29dULL,
  0x55ca1dd82714487cULL,
  0xf9dbea910af88a4aULL,
  0x7dc6aad5513c27c0ULL,
  0xc6e2c5cc5eb8a060ULL,
  0x91012b904358cbedULL,
  0x62fe309312a40f05ULL,
  0x223a0edec37e3f9dULL,
  0x2777ab442335defbULL,
  0xd4937d41c91c4a49ULL,
  0xfbd4ce6e67d2d414ULL,
  0x596e799a7944b90eULL,
  0xa3e920513f67d7fcULL,
  0x91c434ea4be182bfULL,
  0x9e23f4c3657e5e86ULL,
  0x07f7c05d03a128fcULL,
  0x711f2f6e6ba126d6ULL,
  0x08d245b2acaf34bdULL,
  0xcd9004a614211481ULL,
  0x656126fe7e418d65ULL,
  0x4067094a474fbda8ULL,
  0xf1b7d22c3e349331ULL,
  0xccae8fdac6efa3b2ULL,
  0xf166d4a55037ca90ULL,
  0xf09562850413bbd8ULL,
  0xc544f967a837b0c2ULL,
  0x49bd92d4fe0ebc58ULL,
  0x39f7af1eb9d27c4fULL,
  0x94537a5eb8680122ULL,
  0x9a4f860a4c8af69dULL,
  0xde0966fe15e41379ULL,
  0x21f3cf6f3ba3661bULL
};

const U64 zobrist_black_bishop[64] = {
  0xf079128831f43fb7ULL,
  0x9684b5bd0bf0da2cULL,
  0x864de042489109feULL,
  0x0386c0448f600264ULL,
  0x3e6697d93aa247c9ULL,
  0x9aa6d8b51de3872dULL,
  0x99e278b03fb333c7ULL,
  0xbb0ebbd5481f7b57ULL,
  0x5440ab87ce5d7a14ULL,
  0xe44beac46145da4dULL,
  0xac3a6a98cb06a9d6ULL,
  0xa230afc02adc5a67ULL,
  0xecace0964799657fULL,
  0x99438752b94b657cULL,
  0x745633250002f8ffULL,
  0xc2362f64eefa4822ULL,
  0x97a51676daebbd58ULL,
  0xe6077bf1013a3c30ULL,
  0x26a89241e689cc41ULL,
  0x76e5c8d842021166ULL,
  0xef186391a96e899bULL,
  0x5bb8885beae362b9ULL,
  0x3308d00ebb81eae6ULL,
  0x67d3f53eff72aa7bULL,
  0x168eff790bb4da5eULL,
  0xd92ffc957b6a0ceeULL,
  0x7359ffd78ed761f3ULL,
  0x5a74ea3ec8afd0d9ULL,
  0xd4d7498c4dcf721dULL,
  0x2399308fd1e838b3ULL,
  0x37e456a1009e8d69ULL,
  0xda6e9fb84bdf0010ULL,
  0x6481f0fd9f315793ULL,
  0x7c8e3db1ed921a9bULL,
  0x4d42efe83d887c69ULL,
  0x7855a7b7da260638ULL,
  0x60a94d2cf14327f6ULL,
  0x509484427dbcc32bULL,
  0x7e6a8879dae37e5aULL,
  0x7e5558d9283126c2ULL,
  0xe1fde2d649d6c762ULL,
  0xb3d25e8b20873768ULL,
  0x644801144e735e10ULL,
  0x5090dc9da8cb289aULL,
  0x5d3ab13929ca9a0fULL,
  0x25e0adcf357ba786ULL,
  0x3720a44a3648105eULL,
  0x25dbb575fd235e79ULL,
  0x7e6207d8984b46f9ULL,
  0x16e332346663b8d3ULL,
  0xdd717b2b3348b4d7ULL,
  0x76232e0157c8dc14ULL,
  0x2918d35ddf3a8192ULL,
  0x25134ef8812c14b5ULL,
  0x15ed5c33f343b774ULL,
  0x37603bc811a8f066ULL,
  0x62c6b5c243a0a9f3ULL,
  0x5edb79a9e7f6aa04ULL,
  0xf7523c4cf4d41b3eULL,
  0xce2f6d756a4d4c9dULL,
  0x5e3cf74840d34987ULL,
  0x7974834f4640c1ffULL,
  0x29ea8f61df823983ULL,
  0x9b1d614acb2af12aULL
};

const U64 zobrist_black_rook[64] = {
  0xb8cefde4170c0ecaULL,
  0x1a4017a9778dff02ULL,
  0xb8ff119353f56c62ULL,
  0x07c9872e7f08be42ULL,
  0x81db66057e76bfdbULL,
  0xfe3afb4fe954c4b7ULL,
  0xba0028248ab0c8d6ULL,
  0x64a5551e896e55daULL,
  0x9f7c1d735302a07aULL,
  0x36f1b9bd351dca8fULL,
  0x4755eff0cb508912ULL,
  0x0a344f1e771f4a58ULL,
  0xba4c8c0fb524f595ULL,
  0x674fb887875e9e78ULL,
  0x67e9214fe0ab120eULL,
  0x0a94cc8e766d6a1aULL,
  0x93ffaa11ea01c96fULL,
  0xa831caf063ce1f1eULL,
  0x7976ef86bae12f1eULL,
  0x279583aa3ea43200ULL,
  0x9241e1e20fb9f3c8ULL,
  0xa926f9909a699717ULL,
  0xe52e110f1adf7b14ULL,
  0x5abcefc3dd9d914dULL,
  0xe6bdeebb99d4c79eULL,
  0x2cc08eeeb9acfda2ULL,
  0xa68da6367e74748dULL,
  0xb0e1ce2229e1bd18ULL,
  0xd0b24322b004399aULL,
  0xc58279d83cb24a6dULL,
  0xe8deaab08ae75791ULL,
  0x3022439b9a736884ULL,
  0x31e916df32563447ULL,
  0x608f5ea9a5cdec02ULL,
  0xe15a071c04e02441ULL,
  0x685b923bd53f2ec1ULL,
  0xcfb1390dd55d8543ULL,
  0x69a09533b2e5120fULL,
  0xa650527f3fe33dccULL,
  0x0e9ed673961ada57ULL,
  0xb4734088ed52c870ULL,
  0xb76115029f319320ULL,
  0xd2d298bb1c1fa411ULL,
  0x76a13b2e2af6f15eULL,
  0x12624652743b0053ULL,
  0x64ed7c03db852721ULL,
  0xf5c00b3ece821b69ULL,
  0x2d0c045ee1b1649cULL,
  0x6223e17f44e6cf03ULL,
  0x88291985f682e418ULL,
  0x03ff5afcb24012a1ULL,
  0xdd8a7aa0962add37ULL,
  0x3186efedc0f30a65ULL,
  0xb7e196746bf09c78ULL,
  0x9f0eada1a1b23a72ULL,
  0x5266cc1ab2008363ULL,
  0xdafeb48aad9af6e6ULL,
  0xb6bd6328ce0fa41cULL,
  0x5d86babcbe24804fULL,
  0x5eb33b11355c544eULL,
  0x92c8903a2afef64fULL,
  0xd1604aa926ae96eeULL,
  0x4bc3706ef84bc860ULL,
  0xa1319e293c88aa4bULL
};

const U64 zobrist_black_queen[64] = {
  0x8e3e7c3052b3ea22ULL,
  0xa11244fbdf5820c2ULL,
  0xf1cafe98ffb79d7cULL,
  0x2b63507d39a93514ULL,
  0xfb95be2be0b764a7ULL,
  0xcfc5ccf508d50765ULL,
  0xab6b1b883d630120ULL,
  0x640e4c9cb9b279ecULL,
  0x2d28f24dc8cc0c65ULL,
  0x45a0ce3a3748a824ULL,
  0x6c14376accd23700ULL,
  0x6b23977787e8067cULL,
  0x700566b955a3689fULL,
  0x5f983fca33ae5e78ULL,
  0xeafe0b035b537112ULL,
  0x216a4f0c579f1505ULL,
  0xc8904e924159206cULL,
  0xafa20e311ccc78a2ULL,
  0xf01b1bb6459be99fULL,
  0x36235b3eb32dcd83ULL,
  0x6748a628c1f708d0ULL,
  0x66b8c6e0e5f2f5a6ULL,
  0x564a51b6d1e34145ULL,
  0x49ef77b5a0c22983ULL,
  0x5abe127fc647e21cULL,
  0xccb30a6020b0e314ULL,
  0x33cfbcce2616664cULL,
  0xe21469f2180cd943ULL,
  0xcfaa495c101ada04ULL,
  0x37523662103df60dULL,
  0x0ba38d9d8818e220ULL,
  0x0af65592055228daULL,
  0xaead65b46812cb99ULL,
  0xef0e7b60701488c2ULL,
  0x6f6e22de382e962aULL,
  0x2a3f51828cd0503bULL,
  0x92f8f9e99ade9cebULL,
  0x8d3cca4a304bab1bULL,
  0xe13d98df57e7b863ULL,
  0x28d3ec34ee725d39ULL,
  0xdf46d78051e85684ULL,
  0x5827ce5552e1c1fdULL,
  0xdb4ac795f1338b0fULL,
  0x1aee058919177e03ULL,
  0x5f11ade6ff72b3f6ULL,
  0xe820ec4d78312fbdULL,
  0x2d52c95e852dd018ULL,
  0xca235625b592739fULL,
  0xc977a9692da5077aULL,
  0x0b96219f77be8086ULL,
  0xe6f5e6e0e93468f1ULL,
  0xb64201e3ec6a024cULL,
  0x1b9a1553afcaebdcULL,
  0xf81303ba01a127fbULL,
  0xfa6d2565cd1886ceULL,
  0x8a25c4907b8a82aaULL,
  0x29b6539c6df9a930ULL,
  0x4ea9354c753be5b8ULL,
  0x60bc359e1c2d5e70ULL,
  0xf47316fe37820897ULL,
  0x0f47100d2c51e74cULL,
  0xb4c0075a13c82df2ULL,
  0x638baf2d2cc0e0e0ULL,
  0x517aedb073bda84aULL
};

const U64 zobrist_black_king[64] = {
  0xc76f7b31414ce1b7ULL,
  0x14f81618b07db688ULL,
  0xd54175b44bb7ccaaULL,
  0x6a85c9b58cb28339ULL,
  0xe6f679ccd9c2b903ULL,
  0xce6b9bb68126ed8aULL,
  0x563131f64ae4ade6ULL,
  0xa058a7ab1fa6bea1ULL,
  0x177a67c722dc60f2ULL,
  0xa0042c727de0d35aULL,
  0x4cd07546a226c997ULL,
  0xe7dcb7553efb2ed8ULL,
  0x0648ced2312118bdULL,
  0x602ed4b36a88b247ULL,
  0x740eb65f06a9b56cULL,
  0x874114665e0a264fULL,
  0x54419ebc7c2e80e7ULL,
  0xc3a5f445cb2efa0eULL,
  0x9c2d1075698b6d55ULL,
  0xc1448409c7caa886ULL,
  0xab32c78c52dbf8ebULL,
  0x72d00b609c3fbd64ULL,
  0xc937e6dec1bfa2e8ULL,
  0xa0b15078fb451fcaULL,
  0x7181f4f2ef347773ULL,
  0x27b83526e937ba63ULL,
  0xfb49c3e5459b52c3ULL,
  0x0650bc8d47ef0d65ULL,
  0x582eb18284199acaULL,
  0xc340caffbce32058ULL,
  0x9e6c8c77b1dd7ea2ULL,
  0x24953f1ddcf0ad22ULL,
  0x86879616340fcc24ULL,
  0x700aae3fcb3c1d47ULL,
  0x1e3c6b53722510d7ULL,
  0x54de248c27e1ba14ULL,
  0xcc53ad0dd60fabfaULL,
  0x11948f93780c92f2ULL,
  0xd70cb0011c0b29e9ULL,
  0xc51ffba1ef1ef8fbULL,
  0x40754ba791b8232eULL,
  0x6dccb07ff9e65cf4ULL,
  0x261f8c081bd26c0bULL,
  0xefae7afeb09543b3ULL,
  0x1996bc01280b86a4ULL,
  0xca002b2a4b94a017ULL,
  0x609aa10cdb2b679fULL,
  0xed7825ba9caeca4aULL,
  0x8b5a2ded71612e66ULL,
  0xd753f926de6c6b47ULL,
  0x3df2fd72852ffa3eULL,
  0xbc682da0787035c4ULL,
  0x4092d5fee9a1a07bULL,
  0x9cd50a9301283535ULL,
  0xa69efd6fab9fdc54ULL,
  0x76b394162329484dULL,
  0xffd2020ec203948aULL,
  0x9aadd725fb34a06fULL,
  0xb627d89fd4978063ULL,
  0xed83728f063f4d08ULL,
  0x25162e16488defe0ULL,
  0x260ac1eb38a949b6ULL,
  0x2c96cca8bf5ae448ULL,
  0x770ea34960bee284ULL
};

const U64 zobrist_tomove[1] = {
  0xc33076e0a55722c1ULL
};

const U64 zobrist_castling_rights[4] = {
  0x20ef5ddd4e05a08cULL,
  0x6fa5d717367d229dULL,
  0x2c9d5d2849a63cbcULL,
  0xdbea51b38b3e9234ULL
};

const U64 zobrist_epfiles[8] = {
  0xa83001f4139ec3e7ULL,
  0xb57cd4c6ce9cd2f8ULL,
  0x521b2c8b780f2f5aULL,
  0xbdf3154ba36b1d67ULL,
  0x140edee27328f171ULL,
  0xe66283b3b5f9a9a5ULL,
  0x91d412ffe0dbffa0ULL,
  0x30016dbe64b26c1aULL
};

inline U64 zobristNum(int piece, int color, int idx) {
    idx = idx & 63;
    switch (piece) {
    case 0:
        if (color) return zobrist_black_pawn[idx]; else return zobrist_white_pawn[idx];
    case 1:
        if (color) return zobrist_black_knight[idx]; else return zobrist_white_knight[idx];
    case 2:
        if (color) return zobrist_black_bishop[idx]; else return zobrist_white_bishop[idx];
    case 3:
        if (color) return zobrist_black_rook[idx]; else return zobrist_white_rook[idx];
    case 4:
        if (color) return zobrist_black_queen[idx]; else return zobrist_white_queen[idx];
    case 5:
        if (color) return zobrist_black_king[idx]; else return zobrist_white_king[idx];
    default: return 0;
    }
}


inline U64 zobristCR(enum CastlingRights cr) {
    U32 cri = cr;
    cri &= 15;
    U64 ret = 0;
    while (cri) {
        ret ^= zobrist_castling_rights[__builtin_ctz(cr)];
        cri &= cri - 1;
    }
    return ret;
}

inline U64 zobristEP(U64 ep_bb) {
    if (!ep_bb) return 0;
    return zobrist_epfiles[__builtin_ctzll(ep_bb) & 7];
}

inline U64 zobristToMove() {
    return zobrist_tomove[0];
}

}

#endif
